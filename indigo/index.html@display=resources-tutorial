<!-- document UUID=c98d0437-9c07-451f-b5f3-2b3f1502a3b2 generated on Sun, 22 Sep 2024 15:19:29 +0000 by indigo v1.4 for wget v1.21.2, time: 148 ms  -->
<!DOCTYPE html>
<html lang="en">
<head>
<title>Tutorial - indigo</title>
<meta http-equiv="Content-Type" content="text/html">
<meta charset="utf-8">
<link rel="shortcut icon" href="favicon.png" type="image/x-icon">
<style>
body { padding: 0; margin: 0; width: 100%; height: 100%; overflow-x: hidden; font-family: 'DejaVu Serif', georgia, serif; font-size: 120%; line-height: 1.2; background: #53538a url(views/blocks/elements/bg_grad.png) fixed repeat-x; }
div#idg_view-1 { position: relative; top: 0; left: 0; overflow-y: hidden; }
body { font-family: 'DejaVu Serif', georgia, serif; font-size: 120%; line-height: 1.2; background: #53538a url(views/blocks/elements/bg_grad.png) fixed repeat-x; }
div#idg_container-1 { position: relative; top: 0; left: 0; margin-left: 130px; margin-right: 330px; }
div#idg_container-1 a { text-decoration: none; color: black; background: url(views/blocks/elements/underline.png) bottom left repeat-x; padding-bottom: 1px;white-space: nowrap; }
div#idg_container-1 a:hover { background: #729e8d url(views/blocks/elements/underline.png) bottom left repeat-x; }
div#idg_fragment-1-tabbox { position: relative; top: 0; left: 30px; height: 130px; font-family: 'DejaVu Sans', sans-serif; font-size: 120%; }
div#idg_fragment-1-tabs { position: absolute; left: 0; bottom: 0; width: 100%; font-size: 60%; line-height:normal; }
div#idg_fragment-1-tabs ul { margin: 0; padding: 10px 10px 0 10px; list-style: none; }
div#idg_fragment-1-tabs li { float: left; background: url(http://localhost:8000/designs/blocks/tabs/elements/left.png) no-repeat left top; padding-left: 9px; }
div#idg_fragment-1-tabs a { float: left; display: block; background: url(http://localhost:8000/designs/blocks/tabs/elements/right.png) no-repeat right top; padding: 5px 15px 4px 6px; text-decoration:none; color: #555; }
div#idg_fragment-1-tabs a:hover { color: #23314f; background:url(http://localhost:8000/designs/blocks/tabs/elements/right_ro.png) no-repeat right top; }
div#idg_fragment-1-tabs #current { background-image:url(http://localhost:8000/designs/blocks/tabs/elements/left_on.png); }
div#idg_fragment-1-tabs #current div { color: #284a2f; background: url(http://localhost:8000/designs/blocks/tabs/elements/right_on.png) no-repeat right top; padding: 6px 15px 4px 6px; }
div#idg_fragment-1-corner { height: 30px; background: url(http://localhost:8000/designs/blocks/tabs/elements/top.png) no-repeat; background-position: top right; }
div#idg_fragment-1-top { padding: 0; margin-right: 20px; height: 30px; background: #b4d2b0; border: solid #1e3723; border-width: 1px 0px 0px 1px; }
div#idg_container-2 { height: 100%; border: solid #1e3723; border-width: 0px 1px 1px 1px; padding: 0 30px 30px 23px; background: #b4d2b0 url(views/blocks/elements/line_red.png) repeat-y; text-align: justify; }
div#idg_container-2 h1 { border: solid #729e8d; border-width: 2px 0 2px 0; background: url(views/blocks/elements/randomsymbols_bg.jpg); margin: 0; padding: 0.5em 15px 0.4em 0; text-align: right; font-family: 'DejaVu Serif', 'Noto Serif', serif; font-style: italic; font-weight: bold; font-size: 130%; }
div#idg_container-2 h2 { border: solid #729e8d; border-width: 1px 0 1px 0; background: url(views/blocks/elements/randomsymbols_bg.jpg); margin: 0; text-align: right; padding: 0 1em 0.1em 0; font-family: 'Noto Serif', serif; font-style: italic; font-weight: bold; font-size: 110%; }
div#idg_slot-1 { padding: 0 0 0 17px; background: url(views/blocks/elements/line_blue.png); }
div#idg_slot-1 ul { list-style-image: url(views/blocks/elements/bullet.png); }
pre.xml { width: 100%; height: 100%;overflow: auto; }
pre.xml { width: 100%; height: 100%;overflow: auto; }
pre.php { width: 100%; height: 100%;overflow: auto; }
pre.php { width: 100%; height: 100%;overflow: auto; }
pre.php { width: 100%; height: 100%;overflow: auto; }
pre.php { width: 100%; height: 100%;overflow: auto; }
pre.php { width: 100%; height: 100%;overflow: auto; }
pre.php { width: 100%; height: 100%;overflow: auto; }
pre.php { width: 100%; height: 100%;overflow: auto; }
div#idg_container-3 { background: #b4d2b0 url(views/blocks/elements/line_red.png) repeat-y;padding: 15px 25px 0 35px; margin: 6px 1px 0 1px; }
div#idg_fragment-2-content { background: #b4d2b0; text-align: right; background-image: url(views/blocks/elements/metal.png);  font-family: 'DejaVu Sans', sans-serif; font-size: 70%; padding: 5px; }
div#idg_fragment-2-content p { margin: 0.3em 0 0 0; }
span#idg_fragment-2-top { float: left; position: relative; top: 0; left: 0; }
div#idg_container-4 { position: fixed; text-align: right; top: 20px; right: 20px; }
span#idg_fragment-3 { color: #394a71; padding-right: 8px; font-family: sans; font-style: italic; }
img#idg_fragment-4 {  }div#idg_fragment-5-frame { position: fixed; top: 30px; left: 30px; background: #8a94b6; border: 1px solid #23314f; width: 120px; height: 120px; opacity:0.5; }
div#idg_fragment-5-image { position: fixed; top: 46px; left: 46px; }
div#idg_fragment-5-image img { opacity: 0.8; }
div#idg_fragment-6-box { position: fixed; right: 30px; width: 248px; bottom: 0px; font-size: 63%; color: #42262c; }
div#idg_fragment-6-top { width: 250px; height: 16px; background: url(http://localhost:8000/designs/blocks/infobox/elements/box_top.png) no-repeat; background-position: bottom left; }
div#idg_fragment-6-body { width: 100%; background: #9d6575; border: 1px solid #4d2535; border-width: 0px 1px 0px 1px; }
div#idg_fragment-6-caption { font-weight: bold; margin-bottom: 8px; }
div#idg_fragment-6-content { width: 218px; background: #ae6575  url(views/blocks/elements/arms.png) no-repeat;  background-position: top right; margin-left: 10px; padding: 5px 5px 5px 0; font-size: 120%; }img#idg_fragment-6-info { float: left; margin: 0 6px 0 6px; }
div#idg_fragment-6-content h2 { font-size: 100%; font-weight: bold; padding: 0 0 0.7em 0; margin: 0; }
div#idg_fragment-6-content p { margin: 0 0 0.5em 0; }
div#idg_fragment-6-content img { border: 0; }
div#idg_fragment-6-content a { border: 0; text-decoration: none; color: #42262c; }
div#idg_fragment-6-content a:hover { background: #d496ab; opacity:0.5; }
div#idg_fragment-6-content ul { margin: 0 0 -5px 0; padding: 0; list-style: none; }
div#idg_fragment-6-content ol { margin: 0 0 -5px 5px; padding: 0; }
div#idg_fragment-6-content li { margin-left: 12px; padding-bottom: 0.3em; }
div#idg_fragment-6-content { font-family: 'DejaVu Sans', sans-serif; font-size: 110%; }
div#idg_fragment-7-box { width: 248px; font-size: 63%; color: #23314f; position: fixed; top: 160px; right: 30px; z-index: 1;font-family: 'DejaVu Sans', sans-serif; }
div#idg_fragment-7-top { width: 250px; height: 16px; background: url(http://localhost:8000/designs/blocks/dropdown/elements/nav_top.png) no-repeat; background-position: bottom left; }
div#idg_fragment-7-body { width: 100%; background: #9095c6; border: 1px solid #23314f; border-width: 0px 1px 0px 1px; }
div#idg_fragment-7-content { width: 218px; padding: 1px 5px 1px 5px; margin: 0 10px 0 10px; background: #a7aac6 url(views/blocks/elements/compass.png) no-repeat; background-position: top right; }
div#idg_fragment-7-content h2 { font-size: 110%; font-weight: bold; padding: 0.3em 0 0 20px; margin: 0; background: url(http://localhost:8000/designs/blocks/dropdown/elements/arrow_right.png) left center no-repeat; opacity: 0.8; }
div#idg_fragment-7-content ul { margin: 0.5em 0 0 0; padding: 0 4px 0 2px; list-style: none; }
div#idg_fragment-7-content li { width: 100%; padding: 2px 0 1px 0; margin: 0; clear: left; }
div#idg_fragment-7-content li div { font-size: 120%; background: url(http://localhost:8000/designs/blocks/dropdown/elements/link.png) no-repeat; background-position: left center; opacity: 0.8; }
div#idg_fragment-7-content li:hover div, div#idg_fragment-7-content li.over div { padding: 1px 0 2px 1px; background: #9095c6 url(http://localhost:8000/designs/blocks/dropdown/elements/link_h.png) no-repeat; background-position: left center; opacity: 0.8; }
div#idg_fragment-7-content li#current div { background: url(http://localhost:8000/designs/blocks/dropdown/elements/link_c.png) no-repeat; background-position: left center; opacity: 0.8; }
div#idg_fragment-7-content li#current:hover div, div#idg_fragment-7-content li#current.over div { padding: 1px 0 2px 1px;  background: #9095c6 url(http://localhost:8000/designs/blocks/dropdown/elements/link_h.png) no-repeat; background-position: left center; opacity: 0.8; }
div#idg_fragment-7-content a { display: block; padding-left: 18px; text-decoration: none; color: #23314f; }
div#idg_fragment-7-content li#current a { display: block; padding-left: 18px; color: #414d67; }
div#idg_fragment-7-content li#current a:hover { padding-left: 18px; color: #23314f; }
div#idg_fragment-7-content li ul { display: none; margin: 0; padding: 0; font-size: 110%; }
div#idg_fragment-7-content li:hover ul, div#idg_fragment-7-content li.over ul { display: block; }
div#idg_fragment-7-content li:hover ul a { color: #414d67; padding-left: 19px; padding-bottom: 2px; }
div#idg_fragment-7-content li.over ul a { width: 100%; color: #414d67; padding-left: 19px; padding-bottom: 2px; }
div#idg_fragment-7-content li:hover ul a:hover, div#idg_fragment-7-content li.over ul a:hover { color: #23314f; background: #9ca0c6 url(http://localhost:8000/designs/blocks/dropdown/elements/link_b.png) no-repeat; background-position: left center; opacity: 0.8; }
div#idg_fragment-7-bottom { width: 250px; height: 16px; background: url(http://localhost:8000/designs/blocks/dropdown/elements/nav_bottom.png) no-repeat; background-position: top right; }
div#idg_container-6 { position: fixed; top: 49px; right: 212px; width: 629px; height: 80px; background: url(views/blocks/elements/bg_sky.png) no-repeat; z-index: -1; }
div#idg_container-7 { position: fixed; top: 352px; left: 0px; width: 130px; height: 75px; background: url(views/blocks/elements/bg_graph_l.png) no-repeat; }
div#idg_container-8 { position: fixed; top: 352px; right: 0px; width: 330px; height: 130px; background: url(views/blocks/elements/bg_graph_r.png) no-repeat; }
</style>
<style>
@media print {
div#idg_fragment-1-tabbox { display: none }
div#idg_fragment-1-corner { display: none }
div#idg_fragment-2-content { padding: 0; }
div#idg_fragment-2-content span { display: none; }
div#idg_fragment-5-frame { display: none; }
div#idg_fragment-5-image { display: none; }
div#idg_fragment-6-box { display: none }
div#idg_fragment-7-box { display: none }
}
</style>
</head>
<body>
<div id="idg_view-1">
<div id="idg_container-1">
<div id="idg_fragment-1-tabbox">
<div id="idg_fragment-1-tabs">
<ul>
<li><a href="index.html@display=main-home">Home</a></li>
<li><a href="index.html@display=main-about">About</a></li>
<li><a href="index.html@display=main-designs">Designs</a></li>
</ul>
</div>
</div>
<div id="idg_fragment-1-corner">
<div id="idg_fragment-1-top">
</div>
</div>
<div id="idg_container-2">
<div id="idg_slot-1">
<h1>Get your hands dirty!</h1>
<p>
This document will take you through the process of creating
a working instance of indigo that serves actual pages. 
</p>

<p>
It will demonstrate how to:

<ul>
	<li>
		create the site definition that contains the (virtual)
		folder structure and the building blocks of the pages 
		contained in it
	</li>
	<li>
		create views in order to assemble everything that
		is needed to generate actual documents with a specific layout
	</li>
	<li>
		integrate php code for dynamic content creation
	</li>
	<li>
		feed the beast with all sorts of data
	</li>
</ul>
</p>

<p>
	The complete working examples can be found in the
	<a href="http://localhost:8000/docs/demo"><img src="views/blocks/elements/link.png" width="11" height="10" alt=""><code>demo</code></a> subdirectory.
</p>
<span id="how"></span><h2>How do I get started?</h2>

<p>
Let's walk through building a small example site. It will contain two
pages, the main or home page and one containing some images. We will also
create two different layouts, one that places the images in different 
<code>DIV</code>s scattered around the screen and one grouping them in one 
film strip. For brevity, we will call them <code>scatter</code> 
and <code>strip</code>, respectively.</p> 
<p>

<p>
So, how does one specify the structure of a site? We create a file named 
<code>site.xml</code> that defines the page layout:
</p>
<div style="background: #e8e8e8; padding-top: 1px; padding-left: 5px; ">
<pre class="xml" style="font-family:monospace;"><ol><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;?xml</span> <span style="color: #000066;">version</span>=<span style="color: #ff0000;">&quot;1.0&quot;</span> <span style="color: #000066;">encoding</span>=<span style="color: #ff0000;">&quot;utf-8&quot;</span><span style="color: #000000; font-weight: bold;">?&gt;</span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;site</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;demo-helloworld&quot;</span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">    <span style="color: #000066;">content-language</span>=<span style="color: #ff0000;">&quot;en&quot;</span></span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">    <span style="color: #000066;">title-separator</span>=<span style="color: #ff0000;">&quot; - &quot;</span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">    <span style="color: #000066;">index-document</span>=<span style="color: #ff0000;">&quot;home&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #808080; font-style: italic;">&lt;!-- &lt;folder id=&quot;main&quot; name=&quot;Main pages&quot; show-name=&quot;no&quot;&gt; --&gt;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">	<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;document</span> <span style="color: #000066;">id</span>=<span style="color: #ff0000;">&quot;home&quot;</span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">		<span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;Home&quot;</span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">		<span style="color: #000066;">show-name</span>=<span style="color: #ff0000;">&quot;no&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">		<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;datasource</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;text1_src&quot;</span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">			<span style="color: #000066;">class</span>=<span style="color: #ff0000;">&quot;idg_datasource_textfile&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">			filename: home.html</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">		<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/datasource<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">		<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;renderer</span> <span style="color: #000066;">slot</span>=<span style="color: #ff0000;">&quot;main-text&quot;</span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">			<span style="color: #000066;">class</span>=<span style="color: #ff0000;">&quot;idg_view_html_renderer_textfile&quot;</span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">			<span style="color: #000066;">source</span>=<span style="color: #ff0000;">&quot;text1_src&quot;</span> <span style="color: #000000; font-weight: bold;">/&gt;</span></span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">	<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/document<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">	<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;document</span> <span style="color: #000066;">id</span>=<span style="color: #ff0000;">&quot;pictures&quot;</span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">		<span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;Pictures&quot;</span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">		<span style="color: #000066;">show-name</span>=<span style="color: #ff0000;">&quot;yes&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">		<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;datasource</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;text1_src&quot;</span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">			<span style="color: #000066;">class</span>=<span style="color: #ff0000;">&quot;idg_datasource_textfile&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">			filename: pictures.html</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">		<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/datasource<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">		<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;renderer</span> <span style="color: #000066;">slot</span>=<span style="color: #ff0000;">&quot;main-text&quot;</span></span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">			<span style="color: #000066;">class</span>=<span style="color: #ff0000;">&quot;idg_view_html_renderer_textfile&quot;</span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">			<span style="color: #000066;">source</span>=<span style="color: #ff0000;">&quot;text1_src&quot;</span> <span style="color: #000000; font-weight: bold;">/&gt;</span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">	<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/document<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #808080; font-style: italic;">&lt;!-- &lt;/folder&gt; --&gt;</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/site<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li></ol></pre>
</div><p>
The <code>textfile</code> datasource and renderer are already built into 
indigo, but we will see later that it is very easy to roll your own.
</p>

<p>
As for the HTML files, we can just put some text into them for the
moment to see that they are being properly displayed.
<div style="background: url(views/blocks/elements/bg_div.png); width: 100%; height: 100%; border: solid black; border-width: 1px;"><blockquote style="margin-left: 1em;">
While datasources don't get instantiated unless they are actually
referenced, renderers are created immediately. 
If you want to use them in some views but not in others, 
you can add <b><code>nullable="yes"</code></b>
to the declaration. In this case, the renderer will simply be ignored
if there is no corresponding php class.
</blockquote><img src="views/blocks/elements/lightbulb.png" alt="" style="float: right; position: relative; bottom: 40px; right: 2px;"></div>
</p>

<p>
To tell indigo where on the page the renderers should appear, we create
a second XML file, this time specific to the individual layout.
For now we will create a simple generic one but call it
<code>scatter.xml</code> for later use.
</p>

<p>
In case you're wondering, the <code>&lt;part&gt;</code> tag is called 
that way because it embodies an HTML part - in this case it's the 
document's body. The head is generated automatically.
</p>
<div style="background: #e8e8e8; padding-top: 1px; padding-left: 5px; ">
<pre class="xml" style="font-family:monospace;"><ol><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;?xml</span> <span style="color: #000066;">version</span>=<span style="color: #ff0000;">&quot;1.0&quot;</span> <span style="color: #000066;">encoding</span>=<span style="color: #ff0000;">&quot;utf-8&quot;</span><span style="color: #000000; font-weight: bold;">?&gt;</span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;view</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;scatter&quot;</span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">  <span style="color: #000066;">icon</span>=<span style="color: #ff0000;">&quot;favicon.png&quot;</span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">  <span style="color: #000066;">style</span>=<span style="color: #ff0000;">&quot;font-family: verdana, sans-serif; background: #53538a;&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;part</span> <span style="color: #000066;">class</span>=<span style="color: #ff0000;">&quot;fixedcontent&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;container</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;content&quot;</span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">     <span style="color: #000066;">style</span>=<span style="color: #ff0000;">&quot;height: 80%; padding: 30px; background: #b4d2b0;&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;slot</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;main-text&quot;</span> <span style="color: #000066;">style</span>=<span style="color: #ff0000;">&quot;font-size: 120%;&quot;</span> <span style="color: #000000; font-weight: bold;">/&gt;</span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/container<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/part<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/view<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li></ol></pre>
</div><p>
How do we actually display something? We need to invoke indigo from a php
script and:

<ul>
    <li>feed it our .xml files</li>
    <li>get it to parse the parameters in the URL</li>
    <li>assemble the required data and pass it through the renderers</li> 
    <li>emit the resulting document</li>
</ul>
</p>

<p>
This is usually done in <code>index.php</code> but of course you are not 
restricted to that.
</p>
<div style="background: #e8e8e8; padding-top: 1px; padding-left: 5px; ">
<pre class="php" style="font-family:monospace;"><ol><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000000; font-weight: bold;">&lt;?php</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$idg_path</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'../../../indigo'</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #b1b100;">require_once</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;<span style="color: #006699; font-weight: bold;">$idg_path</span>/startup.php&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$site</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> idg_site<span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$site</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">read_xml</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'site.xml'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$site</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">check_all</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>  <span style="color: #666666; font-style: italic;">// comment this out for production version</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$view</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> idg_view_html<span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$view</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">read_xml</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'scatter.xml'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$view</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">check_all</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">// comment this out for production version</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #339933;">!</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$page</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$site</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">get_document</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #990000;">die</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'Page not found.'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">&#125;</span> </div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$view</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">render</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$page</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$view</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">printout</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000000; font-weight: bold;">?&gt;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li></ol></pre>
</div><p>
Since <code>home</code> was designated the index document in <code>site.xml</code>, 
this is what you get if you do not supply an argument in the URL. In order to
display <code>pictures</code> instead, append: <code>/?display=pictures</code>.
If you uncomment the <code>&lt;folder&gt;</code> tags in <code>site.xml</code>
this would become: <code>/?pages=main/pictures</code>.
</p>

<p>
The result can be found <a href="demo/hello/index.php"><img src="views/blocks/elements/link.png" width="11" height="10" alt="">here</a>.
Take a look at the page source - not terribly much overhead!
</p>

<p>
The <code>fixedcontent</code> class is built into
indigo. The resulting document occupies the whole width of the screen and
has no horizontal scrolling. 
</p>
<span id="dynamic"></span><h2>How can I create dynamic content?</h2>

<p>
Before we delve deeper into the workings of data sources and renderers there is
one more aspect we need to cover. Until now we have created views by feeding
them hand-constructed XML files. But there is another way:
</p>


<div style="background: #e8e8e8; padding-top: 1px; padding-left: 5px; ">
<pre class="php" style="font-family:monospace;"><ol><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000000; font-weight: bold;">&lt;?php</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$font</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'font-family: georgia, serif; font-size: 120%;'</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$view</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">set_properties</span><span style="color: #009900;">&#40;</span><span style="color: #990000;">array</span><span style="color: #009900;">&#40;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">	<span style="color: #0000ff;">'name'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'strip'</span><span style="color: #339933;">,</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">	<span style="color: #0000ff;">'icon'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'favicon.png'</span><span style="color: #339933;">,</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">	<span style="color: #0000ff;">'style'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #000088;">$font</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">' background: #53538a;'</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$template</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> idg_view_html_part<span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$template</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">set_properties</span><span style="color: #009900;">&#40;</span><span style="color: #990000;">array</span><span style="color: #009900;">&#40;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">	<span style="color: #0000ff;">'class'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'fixedcontent'</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$view</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">add_child</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$template</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$body</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> idg_container<span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$body</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">set_properties</span><span style="color: #009900;">&#40;</span><span style="color: #990000;">array</span><span style="color: #009900;">&#40;</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">	<span style="color: #0000ff;">'name'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'body'</span><span style="color: #339933;">,</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">	<span style="color: #0000ff;">'style'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'height: 80%; '</span> </div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">	    <span style="color: #339933;">.</span> <span style="color: #0000ff;">'border: solid #1e3723; background: #b4d2b0;'</span>  </div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">	    <span style="color: #339933;">.</span> <span style="color: #0000ff;">'border-width: 0px 1px 1px 1px; padding: 30px;'</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$template</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">add_child</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$body</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$main_text</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> idg_source<span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$main_text</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">set_properties</span><span style="color: #009900;">&#40;</span><span style="color: #990000;">array</span><span style="color: #009900;">&#40;</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">	<span style="color: #0000ff;">'name'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'main-text'</span><span style="color: #339933;">,</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">	<span style="color: #0000ff;">'style'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'padding: 0 0 0 17px;'</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$body</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">add_child</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$main_text</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000000; font-weight: bold;">?&gt;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li></ol></pre>
</div><p>
As you can see, this creates the exact same view (except, of course, for the
font, so that you can see a difference) as the <code>site.xml</code> file.
I have modified <code>index.php</code> so that this file (<code>strip.php</code>) is
included instead of loading <code>site.xml</code> if the variable <code>view</code> 
is set to <code>strip</code> in the URL. I will not describe this here, but you can
<a href="demo/hello-dynamic/index.php@display=pictures"><img src="views/blocks/elements/link.png" width="11" height="10" alt="">try it out</a>.
</p>

<p>
Furthermore, the <code>idg_site</code> object supports the methods 
<code>write_xml($filename)</code> which writes an XML file that it can 
read as input to re-create the same structure, which is useful for error
checking, pretty printing and also could be used to implement a caching
mechanism, and <code>print_debug()</code> which writes an ASCII-based representation
of its internal state to the standard output. In this case, it looks like this:

<div style="background: #e8e8e8; padding: 3px 0 5px 3px;">
<pre style="padding-left: 15px;">
+---------------------------------+
| ID       idg_site-1             |
| XML_TYPE site                   |
+---------------------------------+
| name             'dynamic demo' |
| content-language 'en'           |
| title-separator  ' - '          |
| index-document   'home'         |
+---------------------------------+
  +-------------------------+
  | ID       idg_document-1 |
  | XML_TYPE document       |
  +-------------------------+
  | id        'home'        |
  | name      'Home'        |
  | show-name 'no'          |
  +-------------------------+
    +---------------------------------------+
    | ID       idg_datasource_declaration-1 |
    | XML_TYPE datasource                   |
    +---------------------------------------+
    | name  'text1_src'                     |
    | class 'idg_datasource_textfile'       |
    +---------------------------------------+
    | filename: home.html                   |
    +---------------------------------------+
    +------------------------------------------+
    | ID       idg_renderer_declaration-1      |
    | XML_TYPE renderer                        |
    +------------------------------------------+
    | slot   'main-text'                       |
    | class  'idg_view_html_renderer_textfile' |
    | source 'text1_src'                       |
    +------------------------------------------+
  +-------------------------+
  | ID       idg_document-2 |
  | XML_TYPE document       |
  +-------------------------+
  | id        'pictures'    |
  | name      'Pictures'    |
  | show-name 'yes'         |
  +-------------------------+
    +---------------------------------------+
    | ID       idg_datasource_declaration-2 |
    | XML_TYPE datasource                   |
    +---------------------------------------+
    | name  'text1_src'                     |
    | class 'idg_datasource_textfile'       |
    +---------------------------------------+
    | filename: pictures.html               |
    +---------------------------------------+
    +------------------------------------------+
    | ID       idg_renderer_declaration-2      |
    | XML_TYPE renderer                        |
    +------------------------------------------+
    | slot   'main-text'                       |
    | class  'idg_view_html_renderer_textfile' |
    | source 'text1_src'                       |
    +------------------------------------------+
</pre>
</div>
</p>

<p>
The <code>idg_view</code> object has those methods, too. 
</p>

<p>
Additionally, <code>idg_site</code> implements <code>get_sitemap()</code> which returns 
a string with an XML representation in the format described on
<a href="https://www.sitemaps.org/protocol.html"><img src="views/blocks/elements/link_ext.png" width="11" height="10" alt="">sitemaps.org</a>.
The google search console understands this.
</p>

<span id="phpscript"></span><h2>How can I include php code in my html files?</h2>

<p>
If you have been experimenting a bit you will have noticed
that trying to start a php code section with <code>&lt;?php</code> in the 
HTML files has no effect. This is because those 
files are not read and interpreted by the web server - and thusly 
never seen by the Zend engine - but rather fed through indigo's 
various pipelines.
</p>

<p>
But, of course, the idea is not to create a rather convoluted method of
serving what is in the end static content. On the contrary, it is pretty
simple to create code that inserts content into the document, plus you
have access to the context in which your class exists. 
Remember that everything that produces lines in the final document in indigo 
is a renderer. Therefore, it comes with a class 
<code>idg_datasource_phpscript</code> that allows you to plug in a renderer 
of your own creation that produces HTML and CSS (as well as potentially other
stuff like JavaScript) and sends them down the line. 
</p>

<p>
Now how does all of this look like? Let's just replace that dire error 
message that you get when you request <code>/?display=poppycock</code> 
with something more elegant.
</p>

<p>
Start by replacing <code>die(...);</code> in <code>index.php</code> with 
<code>include('error.php');</code>.
</p>

<p>
Without further ado, here is that file:
</p>
<div style="background: #e8e8e8; padding-top: 1px; padding-left: 5px; ">
<pre class="php" style="font-family:monospace;"><ol><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000000; font-weight: bold;">&lt;?php</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$page</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> idg_document<span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$page</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">parent</span> <span style="color: #339933;">=&amp;</span> <span style="color: #000088;">$site</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$page</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">set_properties</span><span style="color: #009900;">&#40;</span><span style="color: #990000;">array</span><span style="color: #009900;">&#40;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #0000ff;">'id'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'error'</span><span style="color: #339933;">,</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #0000ff;">'name'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'Page not found'</span><span style="color: #339933;">,</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #0000ff;">'content-language'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'en'</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$text1_src</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> idg_datasource<span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$text1_src</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">set_properties</span><span style="color: #009900;">&#40;</span><span style="color: #990000;">array</span><span style="color: #009900;">&#40;</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #0000ff;">'name'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'text1_src'</span><span style="color: #339933;">,</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #0000ff;">'class'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'idg_datasource_phpscript'</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$text1_src</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">set_text</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'script: display_error.php;'</span>  <span style="color: #666666; font-style: italic;">// this is where</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #339933;">.</span> <span style="color: #0000ff;">' class: idg_view_html_renderer_errormsg;'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">// the magic happens</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$page</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">add_child</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$text1_src</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$text1_rend</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> idg_renderer<span style="color: #339933;">;</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$text1_rend</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">set_properties</span><span style="color: #009900;">&#40;</span><span style="color: #990000;">array</span><span style="color: #009900;">&#40;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #0000ff;">'slot'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'main-text'</span><span style="color: #339933;">,</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #0000ff;">'class'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'idg_view_html_renderer_phpscript'</span><span style="color: #339933;">,</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #0000ff;">'source'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'text1_src'</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$page</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">add_child</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$text1_rend</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000000; font-weight: bold;">?&gt;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li></ol></pre>
</div><p>
This also demonstrates how we can create a document on-the-fly.
</p>

<p>
I think that you will by now have an idea of how flexible this whole
approach is. Here comes our first homemade renderer, contained
 in <code>display_error.php</code>:
</p>
<div style="background: #e8e8e8; padding-top: 1px; padding-left: 5px; ">
<pre class="php" style="font-family:monospace;"><ol><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000000; font-weight: bold;">&lt;?php</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000000; font-weight: bold;">class</span> idg_view_html_renderer_errormsg </div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #000000; font-weight: bold;">extends</span> idg_view_html_renderer_phpscript_obj</div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">&#123;</span>    </div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #000000; font-weight: bold;">function</span> __construct<span style="color: #009900;">&#40;</span><span style="color: #339933;">&amp;</span><span style="color: #000088;">$parent</span><span style="color: #009900;">&#41;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #009900;">&#123;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        parent<span style="color: #339933;">::</span>__construct<span style="color: #009900;">&#40;</span><span style="color: #000088;">$parent</span><span style="color: #339933;">,</span> <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">variables</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #009900;">&#125;</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #000000; font-weight: bold;">function</span> render<span style="color: #009900;">&#40;</span><span style="color: #339933;">&amp;</span><span style="color: #000088;">$document</span><span style="color: #339933;">,</span> <span style="color: #339933;">&amp;</span><span style="color: #000088;">$view</span><span style="color: #009900;">&#41;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #009900;">&#123;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        <span style="color: #000088;">$display</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$_GET</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'display'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        <span style="color: #000088;">$body</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;The page you requested (<span style="color: #006699; font-weight: bold;">$display</span>)&quot;</span> </div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">            <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot; was not found on this server.&quot;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        <span style="color: #000088;">$view</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">stream_append</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'html-body'</span><span style="color: #339933;">,</span> <span style="color: #000088;">$body</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #009900;">&#125;</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">&#125;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000000; font-weight: bold;">?&gt;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li></ol></pre>
</div><p>
Simple, isn't it? We will see more complex examples later. For now let it be 
known that in addition to <code>html-body</code> Indigo knows the following streams:
<code>html-head</code>, <code>html-body-start</code>, <code>css</code>,
<code>css-print</code>, and <code>js</code>.
</p>

<p>
Now you can have the site
<a href="demo/hello-dynamic/index.php@display=dirty&#32;words"><img src="views/blocks/elements/link.png" width="11" height="10" alt=""> say dirty words</a> back at you.
</p>
<span id="datasource"></span><h2>How can I access the data from a data source?</h2>

<p>
You can request a datasource from an <code>idg_document</code> via the
<code>get_datasource($name)</code> method. That's right: you are not limited
to use only the data source that you provide for the renderer. This is just
usually the case because the renderer obviously has to understand the format
of the data it is receiving.
</p>

<p>
Additionally, indigo has a built-in data source named <code>_site</code> that
contains ... you guessed it. We will now use this to construct a simple 
renderer that provides our pages with proper navigation.
</p>

<p>
For this example, I have cleaned things up a little bit and switched to
<code>fixedbar</code> as the basic layout. However, I will from now on only present
the relevant parts that contain new material.
</p>

<p>
We place the renderer directly inside the <code>page</code> - a container 
can contain other containers but a renderer need not be stuck in a container 
first. The <code>fixedbar</code> class displays its first child in a vertical
strip on the left or right side and lets the second child occupy the rest 
of the screen. If a third child is present it will be emitted before 
anything else which is necessary for instance if you use fixed positioning 
in the CSS.
</p>

<p>
And here is how you get the data from the data source:
</p>
<div style="background: #e8e8e8; padding-top: 1px; padding-left: 5px; ">
<pre class="php" style="font-family:monospace;"><ol><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000000; font-weight: bold;">&lt;?php</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000000; font-weight: bold;">class</span> idg_view_html_renderer_navigation <span style="color: #000000; font-weight: bold;">extends</span> idg_view_node_obj</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">&#123;</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #000000; font-weight: bold;">function</span> __construct<span style="color: #009900;">&#40;</span><span style="color: #339933;">&amp;</span><span style="color: #000088;">$parent</span><span style="color: #009900;">&#41;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">	<span style="color: #009900;">&#123;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">		parent<span style="color: #339933;">::</span>__construct<span style="color: #009900;">&#40;</span><span style="color: #000088;">$parent</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #009900;">&#125;</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #000000; font-weight: bold;">function</span> render<span style="color: #009900;">&#40;</span><span style="color: #339933;">&amp;</span><span style="color: #000088;">$document</span><span style="color: #339933;">,</span> <span style="color: #339933;">&amp;</span><span style="color: #000088;">$view</span><span style="color: #009900;">&#41;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #009900;">&#123;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        <span style="color: #000088;">$style</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">parent</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">get_property</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'style'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        <span style="color: #000088;">$idg_id</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">parent</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">idg_id</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        <span style="color: #000088;">$css</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;div#<span style="color: #006699; font-weight: bold;">$idg_id</span> { padding-top: 5px; padding-left: 2px; &quot;</span> </div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">            <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot; font-size: 90%; <span style="color: #006699; font-weight: bold;">$style</span> }<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span> </div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">            <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot; div#<span style="color: #006699; font-weight: bold;">$idg_id</span> a { display: block; text-align: left; &quot;</span> </div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">            <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot; padding: 10px 5px; margin: 0 0 2px; border-width: 0;&quot;</span> </div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">            <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot; text-decoration: none; color: #c2c2c2; width: 98%;&quot;</span> </div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">            <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot; font-weight: bold; }<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span> </div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">            <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot; div#<span style="color: #006699; font-weight: bold;">$idg_id</span> a span { display: none; }<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span> </div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">            <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot; div#<span style="color: #006699; font-weight: bold;">$idg_id</span> a:hover {&quot;</span> </div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">            <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot; background: url(images/bg_grad.png) top left&quot;</span> </div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">            <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot; fixed repeat-x; color: #53538a; }<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span> </div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">            <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot; div#<span style="color: #006699; font-weight: bold;">$idg_id</span> a:hover span { display: block;&quot;</span> </div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">            <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot; position: relative; z-index: 100; &quot;</span> </div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">            <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot; width: 100px; top: 0px; left: 0px; padding-top: 5px;&quot;</span> </div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">            <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot; font-size: 80%; font-style: italic; }<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        <span style="color: #000088;">$view</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">stream_append</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'css'</span><span style="color: #339933;">,</span> <span style="color: #000088;">$css</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        <span style="color: #000088;">$body</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;&lt;div id=<span style="color: #000099; font-weight: bold;">\&quot;</span><span style="color: #006699; font-weight: bold;">$idg_id</span><span style="color: #000099; font-weight: bold;">\&quot;</span>&gt;<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span><span style="color: #339933;">;</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">datasource</span><span style="color: #339933;">-&gt;</span><span style="color: #990000;">rewind</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">// not necessary here, do it on principle</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        <span style="color: #b1b100;">while</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$node</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">datasource</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">get_token</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">            <span style="color: #000088;">$path</span> <span style="color: #339933;">=&amp;</span> <span style="color: #000088;">$node</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">properties</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'path'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">            <span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$path</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">                <span style="color: #000088;">$name</span> <span style="color: #339933;">=&amp;</span> <span style="color: #000088;">$node</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">properties</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'name'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">                <span style="color: #000088;">$comment</span> <span style="color: #339933;">=&amp;</span> <span style="color: #000088;">$node</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">properties</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'navigation-comment'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">                <span style="color: #000088;">$body</span> <span style="color: #339933;">.=</span> <span style="color: #0000ff;">&quot;&lt;a href=<span style="color: #000099; font-weight: bold;">\&quot;</span>?display=<span style="color: #006699; font-weight: bold;">$path</span><span style="color: #000099; font-weight: bold;">\&quot;</span>&gt;<span style="color: #006699; font-weight: bold;">$name</span>&quot;</span> </div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">                    <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot;&lt;span&gt;<span style="color: #006699; font-weight: bold;">$comment</span>&lt;/span&gt;&lt;/a&gt;<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">            <span style="color: #009900;">&#125;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        <span style="color: #009900;">&#125;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        <span style="color: #000088;">$body</span> <span style="color: #339933;">.=</span> <span style="color: #0000ff;">&quot;&lt;/div&gt;<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        <span style="color: #000088;">$view</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">stream_append</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'html-body'</span><span style="color: #339933;">,</span> <span style="color: #000088;">$body</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #009900;">&#125;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">&#125;</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000000; font-weight: bold;">?&gt;</span> </div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li></ol></pre>
</div><p>
As you can see, the data source is already assigned to the object.
We retrieve tokens until the stream goes stale. The tokens themselves 
have properties and a data member, just like an XML object would.
</p>

<p>
In the case of <code>_site</code> there is also a property called <code>type</code>
that can be either <code>document</code> or <code>folder</code>. If you are working
with folders, you are responsible for de-serializing the nodes to form a 
tree again should this be necessary. 
</p>
<span id="newdatasource"></span><h2>How do I define a new data source?</h2>
<p>
Dead simple. Since all that needs to be done is to retrieve data and
store it for the lifetime of the object, this can be accomplished
in the constructor.
</p>
<div style="background: #e8e8e8; padding-top: 1px; padding-left: 5px; ">
<pre class="php" style="font-family:monospace;"><ol><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000000; font-weight: bold;">&lt;?php</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000000; font-weight: bold;">class</span> idg_datasource_imagelist <span style="color: #000000; font-weight: bold;">extends</span> idg_datasource_instance</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">&#123;</span>   </div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #000000; font-weight: bold;">function</span> __construct<span style="color: #009900;">&#40;</span><span style="color: #339933;">&amp;</span><span style="color: #000088;">$parameters</span><span style="color: #009900;">&#41;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #009900;">&#123;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        parent<span style="color: #339933;">::</span>__construct<span style="color: #009900;">&#40;</span><span style="color: #000088;">$parameters</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        <span style="color: #000088;">$path</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@</span><span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">parameters</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'path'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        <span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #339933;">!</span><span style="color: #000088;">$path</span><span style="color: #009900;">&#41;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">            idg_diag<span style="color: #009900;">&#40;</span><span style="color: #000088;">$this</span><span style="color: #339933;">,</span> <span style="color: #990000;">get_class</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$this</span><span style="color: #009900;">&#41;</span> </div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">                <span style="color: #339933;">.</span> <span style="color: #0000ff;">': mandatory parameter(path) not set'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        <span style="color: #000088;">$directory</span> <span style="color: #339933;">=</span> <span style="color: #990000;">scandir</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$path</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        <span style="color: #b1b100;">for</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$i</span> <span style="color: #339933;">=</span> <span style="color: #cc66cc;">0</span><span style="color: #339933;">;</span> <span style="color: #000088;">$i</span> <span style="color: #339933;">&lt;</span> <span style="color: #990000;">count</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$directory</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #000088;">$i</span> <span style="color: #339933;">++</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>       </div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">            <span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #990000;">in_array</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$directory</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">,</span> <span style="color: #990000;">array</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'.'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'..'</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">                <span style="color: #b1b100;">continue</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">            <span style="color: #000088;">$filename</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$path</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'/'</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$directory</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">            <span style="color: #000088;">$token</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> idg_token<span style="color: #009900;">&#40;</span><span style="color: #000088;">$filename</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">// only way to set data</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">            <span style="color: #000088;">$properties</span> <span style="color: #339933;">=</span> <span style="color: #990000;">array</span><span style="color: #009900;">&#40;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">                <span style="color: #0000ff;">'type'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #990000;">pathinfo</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$filename</span><span style="color: #339933;">,</span> PATHINFO_EXTENSION<span style="color: #009900;">&#41;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">            <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">            <span style="color: #000088;">$token</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">set_properties</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$properties</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">            <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">tokens</span><span style="color: #009900;">&#91;</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$token</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">        <span style="color: #009900;">&#125;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #009900;">&#125;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">&#125;</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000000; font-weight: bold;">?&gt;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li></ol></pre>
</div><p>
And that's basically it! The renderers don't demonstrate anything new,
so I'll omit them here. Since we have to provide a slot for the images
on all pages, we plug that hole with <code>idg_view_html_renderer_null</code> 
(which predictably does nothing) and feed it the already available 
 <code>_site</code> as source.
</p>

<p>
To take a look at the result, click 
<a href="http://localhost:8000/docs/demo/final/index.php"><img src="views/blocks/elements/link.png" width="11" height="10" alt="">here</a>. Of course, this is 
not a real life example of how one would implement a picture gallery,
the images are just meant to have <em>some</em> content to put on the pages.
Don't you hate those tutorials which look good but you can't 
make out what's really important because of all the eye candy? Well this one
certainly is very ugly!
</p>

<span id="more"></span><h2>Is there more?</h2>

<p>
Not much. There is a built-in convenience class, namely 
<code>idg_view_html_item</code>. It accepts either <code>image</code> or <code>text</code>
as its <code>class</code> parameter. Use them like this:
</p>

<p>
	
</p>
<div style="background: #e8e8e8; padding-top: 1px; padding-left: 5px; ">
<pre class="php" style="font-family:monospace;"><ol><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$image</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> idg_view_html_item<span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$image</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">set_properties</span><span style="color: #009900;">&#40;</span><span style="color: #990000;">array</span><span style="color: #009900;">&#40;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">	<span style="color: #0000ff;">'class'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'image'</span><span style="color: #339933;">,</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">	<span style="color: #0000ff;">'style'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'padding-right: 8px;'</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #666666; font-style: italic;">/*</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #666666; font-style: italic;">&nbsp;* The image will have its border set to 0.</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #666666; font-style: italic;">&nbsp;* The source file name will have 'images/' prepended to it.</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #666666; font-style: italic;">&nbsp;*/</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$image</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">set_text</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'source: image.png; width: 220; height: 90; '</span> <span style="color: #339933;">.</span> </div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #339933;">.</span> <span style="color: #0000ff;">'alt-text: an image'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$text</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> idg_view_html_item<span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$text</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">set_properties</span><span style="color: #009900;">&#40;</span><span style="color: #990000;">array</span><span style="color: #009900;">&#40;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #0000ff;">'class'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'text'</span><span style="color: #339933;">,</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">    <span style="color: #0000ff;">'style'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'font-size: 130%; font-style: italic;'</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #666666; font-style: italic;">/* </span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #666666; font-style: italic;">&nbsp;* Since this will be embedded in XML</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #666666; font-style: italic;">&nbsp;* you need to quote HTML tags:</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #666666; font-style: italic;">&nbsp;*</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #666666; font-style: italic;">&nbsp;* &lt;br&gt; becomes &amp;lt;br&amp;gt;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #666666; font-style: italic;">&nbsp;*</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #666666; font-style: italic;">&nbsp;* Indigo then converts them back. This also works with html entities</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #666666; font-style: italic;">&nbsp;* e.g. &amp;amp;nbsp; - if your'e missing a space after your tags because</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #666666; font-style: italic;">&nbsp;* the conversion has gobbled it up, use this.</span></div></li><li style="background: #f0f0f0;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #666666; font-style: italic;">&nbsp;*/</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;"><span style="color: #000088;">$text</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">set_text</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'You can use document properties: {description}'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li><li style="background: #e8e8e8;"><div style="font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;">&nbsp;</div></li></ol></pre>
</div><p>
One more thing: the views have a <code>filter</code> property 
that you can assign a function to. Most designs for these pages make 
completely unnecessary use of it to provide you with examples!
</p>

<p>
That's really it. I do hope you found this useful. If you have done something
interesting with indigo or even extended it to suit your purposes, please
do not hesitate to <a href="mailto:daniel@schlachta.info"><img src="views/blocks/elements/link.png" width="11" height="10" alt="">drop me a line</a>!
</p>
</div>
</div>
<div id="idg_container-3">
<div id="idg_fragment-2-content">
Last change: 10.10.2023
<p>
<span id="idg_fragment-2-top"><a href="index.html@display=resources-tutorial#top"><img src="views/blocks/elements/link.png" width="11" height="10" alt="">top</a></span>
 Copyright &copy;2023 Daniel Schlachta
</p>
</div>
</div>
</div>
<div id="idg_container-4">
<span id="idg_fragment-3"><b>indigo</b> / web
        </span>
<img id="idg_fragment-4" src="views/blocks/elements/indigo.png"width="	width: ;" height="">
</div>
<div id="idg_fragment-5-frame"></div>
<div id="idg_fragment-5-image"><img src="pages/resources/tutorial/sneakers.jpg" width="90" height="90" alt=""></div>
<div id="idg_fragment-6-box">
<div id="idg_fragment-6-top"></div>
<div id="idg_fragment-6-body">
<div id="idg_fragment-6-content">
<img src="http://localhost:8000/designs/blocks/infobox/elements/info.png" id="idg_fragment-6-info" width="14" height="14" alt="">
<div id="idg_fragment-6-caption">Dolor sit amet</div>
<ul><li>

        Lorem ipsum.
    </li></ul>
</div>
</div>
</div>
<div id="idg_fragment-7-box">
<div id="idg_fragment-7-top"></div>
<div id="idg_fragment-7-body">
<div id="idg_fragment-7-content">
<h2>Resources</h2>
<ul id="idg_fragment-7-dropdown">
  <li id="current"><div><a href="index.html@display=resources-tutorial#top">Tutorial</a></div>
    <ul>
      <li><a href="index.html@display=resources-tutorial#how">Getting started</a></li>
      <li><a href="index.html@display=resources-tutorial#dynamic">Creating dynamic content</a></li>
      <li><a href="index.html@display=resources-tutorial#phpscript">Embedding php code</a></li>
      <li><a href="index.html@display=resources-tutorial#datasource">Accessing data sources</a></li>
      <li><a href="index.html@display=resources-tutorial#newdatasource">Creating data sources</a></li>
      <li><a href="index.html@display=resources-tutorial#more">More features</a></li>

  </ul>
  </li>
  <li><div><a href="index.html@display=reference">Reference</a></div>  </li>
  <li><div><a href="index.html@display=examples">Examples</a></div>  </li>
  <li><div><a href="index.html@display=license">License</a></div></li>
</ul>
</div>
</div>
<div id="idg_fragment-7-bottom"></div>
</div>
<div id="idg_container-6">
</div>
<div id="idg_container-7">
</div>
<div id="idg_container-8">
</div>
</div>
</body>
</html>